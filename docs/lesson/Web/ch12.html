<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>第十二章课后作业</title>

</head>
<body>
<h1>第十二章课后作业</h1>
<h2>1、MyBatis中常用的动态SQL元素有哪些？</h2>
<ol>
    <li>if： 条件判断元素，用于在SQL语句中添加条件判断。
        <pre><code>
            < select id="getUser" parameterType="int" resultType="User">
                SELECT * FROM users
                WHERE id = #{id}
                < if test="username != null">
                    AND username = #{username}
                < /if>
            < /select>

        </code></pre>
    <li>choose、when、otherwise： 类似于Java中的switch语句，根据条件选择不同的分支。
        <pre><code>
        &ltselect id="getUser" parameterType="int" resultType="User">
            SELECT * FROM users
            &ltwhere>
                &ltchoose>
                    &ltwhen test="id != null">
                        AND id = #{id}
                    &ltwhen>
                    &ltwhen test="username != null">
                        AND username = #{username}
                    &ltwhen>
                    &ltotherwise>
                        AND status = 'ACTIVE'
                    &ltotherwise>
                &ltchoose>
            &ltwhere>
        &ltselect>

    </code></pre>
    <li>trim： 用于处理SQL语句的前缀、后缀、和分隔符，可以根据条件自动添加或删除。
        <pre><code>
    &ltupdate id="updateUser" parameterType="User">
        UPDATE users
        &lttrim prefix="SET" suffixOverrides=",">
            &ltif test="username != null">
                username = #{username},
            &ltif>
            &ltif test="password != null">
                password = #{password},
            &ltif>
        &lttrim>
        WHERE id = #{id}
    &ltupdate>

    </code></pre>
    <li>foreach： 用于迭代集合或数组，并在SQL语句中生成相应的片段。
        <pre><code>
        &ltselect id="getUsersByIdList" parameterType="List" resultType="User">
            SELECT * FROM users
            WHERE id IN
            &ltforeach collection="idList" item="id" open="(" separator="," close=")">
                #{id}
            &ltforeach>
        &ltselect>

    </code></pre>
    <li>set： 用于动态更新语句中的SET子句，根据条件自动添加更新项。
        <pre><code>
        &ltupdate id="updateUser" parameterType="User">
            UPDATE users
            &ltset>
                &ltif test="username != null">
                    username = #{username},
                &ltif>
                &ltif test="password != null">
                    password = #{password},
               &ltif>
            &ltset>
            WHERE id = #{id}
        &ltupdate>
</code></pre>

</ol>
<h2>2、MyBatis动态SQL元素中的if,choose,when oterwise如何使用</h2>
在MyBatis中，if、choose、when 和 otherwise 这些动态SQL元素用于构建具有条件判断的SQL语句，以便在不同的情况下生成不同的SQL片段。
<ol>
    <li> if 元素
        if 元素用于在SQL语句中添加条件判断。
        <pre><code>
    &ltelect id="getUser" parameterType="int" resultType="User">
        SELECT * FROM users
        WHERE id = #{id}
        &ltif test="username != null">
            AND username = #{username}
        &ltif>
    &ltselect>
        </code></pre>
    <li>choose、when 和 otherwise 元素
        choose、when 和 otherwise 用于在多个条件中选择一个分支。
        <pre><code>
        &ltselect id="getUser" parameterType="int" resultType="User">
            SELECT * FROM users
            &ltwhere>
                &ltchoose>
                    &ltwhen test="id != null">
                        AND id = #{id}
                    &ltwhen>
                    &ltwhen test="username != null">
                        AND username = #{username}
                    &ltwhen>
                    &ltotherwise>
                        AND status = 'ACTIVE'
                    &ltotherwise>
                &ltchoose>
            &ltwhere>
        &ltselect>

        </code></pre>

</ol>
<a href="./ch13.html">下一章作业</a>
</body>
</html>